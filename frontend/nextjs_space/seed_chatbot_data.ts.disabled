import { config } from 'dotenv'
import { PrismaClient } from '@prisma/client'

config()

const prisma = new PrismaClient()

async function seedChatbotData() {
  try {
    console.log('üå± Generando datos de prueba para el chatbot...')

    const interactions = [
      // Proyectos
      {
        userMessage: '¬øCu√°les son los proyectos activos en Renca?',
        botResponse: 'Seg√∫n los registros de proyectos p√∫blicos, actualmente hay 3 proyectos activos en Renca: Plaza de la Cultura (70% avance), Mejoramiento Vial Av. Dorsal ($500M), y Centro Deportivo Municipal ($800M).',
        intent: 'proyectos_renca_activos',
        category: 'Proyectos',
        hasData: true,
        filters: { municipality: 'Renca', status: 'activo' },
        responseTime: 1250
      },
      {
        userMessage: 'Dime sobre los proyectos en ejecuci√≥n',
        botResponse: 'De acuerdo a los datos de proyectos, hay 12 proyectos en ejecuci√≥n con una inversi√≥n total de $5.2 mil millones.',
        intent: 'proyectos_en_ejecucion',
        category: 'Proyectos',
        hasData: true,
        filters: { status: 'en ejecuci√≥n' },
        responseTime: 980
      },
      {
        userMessage: '¬øQu√© proyectos hay en la comuna?',
        botResponse: 'Seg√∫n los registros p√∫blicos, hay 25 proyectos registrados en total, de los cuales 12 est√°n en ejecuci√≥n, 8 completados y 5 en planificaci√≥n.',
        intent: 'proyectos_totales',
        category: 'Proyectos',
        hasData: true,
        filters: {},
        responseTime: 1100
      },
      
      // Presupuestos
      {
        userMessage: 'Cu√°l es el presupuesto para el a√±o 2024',
        botResponse: 'El presupuesto municipal para 2024 asciende a $8.500 millones de pesos, distribuido en: Educaci√≥n (35%), Salud (25%), Obras P√∫blicas (20%), y otros (20%).',
        intent: 'presupuesto_2024',
        category: 'Presupuestos',
        hasData: true,
        filters: { year: '2024' },
        responseTime: 1050
      },
      {
        userMessage: 'Presupuesto de educaci√≥n 2025',
        botResponse: 'Seg√∫n los datos de presupuestos p√∫blicos, el presupuesto destinado a educaci√≥n para 2025 es de $3.200 millones, un incremento del 12% respecto al a√±o anterior.',
        intent: 'presupuesto_educacion_2025',
        category: 'Presupuestos',
        hasData: true,
        filters: { year: '2025', department: 'Educaci√≥n' },
        responseTime: 950
      },
      {
        userMessage: '¬øCu√°nto se presupuest√≥ para obras p√∫blicas?',
        botResponse: 'De acuerdo a los registros de presupuestos, para obras p√∫blicas se asignaron $1.800 millones en el presupuesto vigente.',
        intent: 'presupuesto_obras_publicas',
        category: 'Presupuestos',
        hasData: true,
        filters: { department: 'Obras P√∫blicas' },
        responseTime: 890
      },
      
      // Contratos
      {
        userMessage: 'Mu√©strame los contratos vigentes',
        botResponse: 'Actualmente hay 18 contratos vigentes registrados en el sistema, con un valor total de $2.100 millones. Los principales contratos son: Mantenci√≥n de √Åreas Verdes ($450M), Limpieza Municipal ($380M), y Seguridad ($320M).',
        intent: 'contratos_vigentes',
        category: 'Contratos',
        hasData: true,
        filters: { status: 'vigente' },
        responseTime: 1300
      },
      {
        userMessage: '¬øQu√© contratos tiene la municipalidad?',
        botResponse: 'Seg√∫n los datos de contratos p√∫blicos, la municipalidad tiene 35 contratos registrados en total, de los cuales 18 est√°n vigentes, 12 finalizados y 5 en proceso de renovaci√≥n.',
        intent: 'contratos_totales',
        category: 'Contratos',
        hasData: true,
        filters: {},
        responseTime: 1150
      },
      
      // Gastos
      {
        userMessage: 'Cu√°les fueron los gastos del √∫ltimo mes',
        botResponse: 'De acuerdo a los registros de gastos p√∫blicos, el mes pasado se ejecutaron gastos por $650 millones, principalmente en: Personal (40%), Servicios B√°sicos (25%), y Mantenci√≥n (20%).',
        intent: 'gastos_ultimo_mes',
        category: 'Gastos',
        hasData: true,
        filters: {},
        responseTime: 1050
      },
      {
        userMessage: 'Gastos en mantenci√≥n',
        botResponse: 'Seg√∫n los datos de gastos, se han ejecutado $280 millones en mantenci√≥n durante el a√±o fiscal actual, distribuidos en mantenci√≥n de edificios, veh√≠culos y equipamiento.',
        intent: 'gastos_mantencion',
        category: 'Gastos',
        hasData: true,
        filters: { category: 'Mantenci√≥n' },
        responseTime: 920
      },
      
      // Estad√≠sticas
      {
        userMessage: 'Dame un resumen general de la gesti√≥n municipal',
        botResponse: 'De acuerdo a las estad√≠sticas generales: Presupuesto total: $8.5B, Gastos ejecutados: $6.2B (73%), 25 proyectos totales (12 activos), 35 contratos (18 vigentes). La ejecuci√≥n presupuestaria est√° dentro de lo planificado.',
        intent: 'resumen_general',
        category: 'Estad√≠sticas',
        hasData: true,
        filters: {},
        responseTime: 1400
      },
      
      // Consultas sin datos
      {
        userMessage: '¬øCu√°nto gasta el alcalde en viajes?',
        botResponse: 'No encuentro informaci√≥n p√∫blica para esa consulta espec√≠fica. Puedes revisar los m√≥dulos en el sitio o realizar una solicitud formal de informaci√≥n.',
        intent: 'gastos_alcalde_viajes',
        category: 'Gastos',
        hasData: false,
        filters: { category: 'Viajes' },
        responseTime: 650
      },
      {
        userMessage: 'Informaci√≥n sobre licitaciones pendientes',
        botResponse: 'No encuentro informaci√≥n p√∫blica para esa consulta. Puedes revisar los m√≥dulos en el sitio o realizar una solicitud formal de informaci√≥n.',
        intent: 'licitaciones_pendientes',
        category: 'Contratos',
        hasData: false,
        filters: { status: 'pendiente' },
        responseTime: 580
      }
    ]

    for (const interaction of interactions) {
      await prisma.chatbotInteraction.create({
        data: {
          ...interaction,
          timestamp: new Date(Date.now() - Math.random() * 7 * 24 * 60 * 60 * 1000) // √öltimos 7 d√≠as
        }
      })
    }

    console.log(`‚úÖ Se crearon ${interactions.length} interacciones de prueba`)
    
    // Verificar que se crearon
    const count = await prisma.chatbotInteraction.count()
    console.log(`üìä Total de interacciones en la base de datos: ${count}`)
    
  } catch (error) {
    console.error('‚ùå Error:', error)
  } finally {
    await prisma.$disconnect()
  }
}

seedChatbotData()
